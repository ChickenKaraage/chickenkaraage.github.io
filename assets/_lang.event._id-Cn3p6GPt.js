import{l as u,t as l,B as g,w as p}from"./root-ByxM8SGe.js";import{j as e,L as b,u as N,r as h}from"./chunk-K6CSEXPM-CZM0g_7M.js";import{a as f}from"./event-service-D0DkgbZs.js";import"./preload-helper-BrSc9U5X.js";function y({timeline:c,title:n,lang:a}){const s=[...u(c,a)].sort((r,d)=>{const o=new Date(r.date),x=new Date(d.date);return o.getTime()-x.getTime()});return e.jsxs("div",{className:"my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:n||l("timeline",a)}),e.jsx("div",{className:"relative border-l-2 border-gray-300 dark:border-gray-700 ml-4 pl-8 space-y-8",children:s.map((r,d)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-10 w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:r.title}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:r.date}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:r.description})]})]},d))})]})}function k({participants:c,title:n,lang:a}){const t=u(c,a);return e.jsxs("div",{className:"my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:n||l("participants",a)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((s,r)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx(b,{to:`${g}/${a}/figure/${s.personId}`,className:"text-lg font-semibold text-blue-600 hover:underline dark:text-blue-400",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:s.role}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:s.description})]},r))})]})}const z=p(function(){const n=N(),a=n.id,t=n.lang==="zh"?"zh":"en",[s,r]=h.useState(null),[d,o]=h.useState(!0),[x,j]=h.useState(null);return h.useEffect(()=>{async function i(){try{o(!0);const m=await f(a);if(m){const v=u(m,t);r(v)}else j("Event not found")}catch(m){j("Error loading event"),console.error(m)}finally{o(!1)}}i()},[a,t]),d?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:"Loading..."}):x||!s?e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:["Error: ",x||"Event not found"]}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(b,{to:`${g}/${t}`,className:"text-blue-600 hover:underline dark:text-blue-400",children:["← ",l("backToHome",t)]})}),e.jsxs("article",{children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.title}),e.jsxs("div",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:[s.startDate,s.endDate?` ${l("to",t)} ${s.endDate}`:""," • ",s.location]}),e.jsx("p",{className:"text-xl font-medium mb-4",children:s.summary})]}),e.jsx("div",{className:"w-full h-48 mb-8 rounded-lg overflow-hidden shadow-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xl",children:s.title})}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",children:l("backgroundContext",t)}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{children:s.context})})]}),e.jsx(y,{timeline:s.timeline,lang:t}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",children:l("outcome",t)}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{children:s.outcome})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",children:l("historicalSignificance",t)}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{children:s.significance})})]}),e.jsx(k,{participants:s.participants,lang:t}),s.relatedEvents&&s.relatedEvents.length>0&&e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:l("relatedEvents",t)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.relatedEvents.map(i=>e.jsxs(b,{to:`${g}/${t}/event/${i.id}`,className:"border border-gray-200 dark:border-gray-700 p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:i.relationship}),e.jsx("div",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:i.title})]},i.id))})]})]})]})});export{z as default};
