import{l as u,t as l,B as b,w as v}from"./root-d8jykWP5.js";import{j as e,L as g,u as N,r as h}from"./chunk-K6CSEXPM-CZM0g_7M.js";import{a as f}from"./event-service-xtSU9vEo.js";import"./preload-helper-D7HrI6pR.js";function y({timeline:o,title:d,lang:r}){const s=[...u(o,r)].sort((a,i)=>{const c=new Date(a.date),x=new Date(i.date);return c.getTime()-x.getTime()});return e.jsxs("div",{className:"my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:d||l("timeline",r)}),e.jsx("div",{className:"relative border-l-2 border-gray-300 dark:border-gray-700 ml-4 pl-8 space-y-8",children:s.map((a,i)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-10 w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 rounded-full bg-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold",children:a.title}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:a.date}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:a.description})]})]},i))})]})}function k({participants:o,title:d,lang:r}){const t=u(o,r);return e.jsxs("div",{className:"my-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:d||l("participants",r)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map((s,a)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx(g,{to:`${b}/${r}/figure/${s.personId}`,className:"text-lg font-semibold text-blue-600 hover:underline dark:text-blue-400",children:s.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:s.role}),e.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:s.description})]},a))})]})}const z=v(function(){const d=N(),r=d.id,t=d.lang==="zh"?"zh":"en",[s,a]=h.useState(null),[i,c]=h.useState(!0),[x,j]=h.useState(null);return h.useEffect(()=>{async function n(){try{c(!0);const m=await f(r);if(m){const p=u(m,t);a(p)}else j("Event not found")}catch(m){j("Error loading event"),console.error(m)}finally{c(!1)}}n()},[r,t]),i?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:"Loading..."}):x||!s?e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-red-800 dark:text-red-400 mb-2",children:"Error"}),e.jsx("p",{className:"text-red-700 dark:text-red-300 mb-4",children:x||"Event not found"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors cursor-pointer",children:"← Go Back"}),e.jsx(g,{to:`${b}/${t}`,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors",children:"Go to Home"})]})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(g,{to:`${b}/${t}`,className:"text-blue-600 hover:underline dark:text-blue-400",children:["← ",l("backToHome",t)]})}),e.jsxs("article",{children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.title}),e.jsxs("div",{className:"text-lg text-gray-600 dark:text-gray-400 mb-4",children:[s.startDate,s.endDate?` ${l("to",t)} ${s.endDate}`:""," • ",s.location]}),e.jsx("p",{className:"text-xl font-medium mb-4",children:s.summary})]}),e.jsx("div",{className:"w-full h-48 mb-8 rounded-lg overflow-hidden shadow-lg bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 text-xl",children:["Placeholder image - ",s.title]})}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",children:l("backgroundContext",t)}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{children:s.context})})]}),e.jsx(y,{timeline:s.timeline,lang:t}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",children:l("outcome",t)}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{children:s.outcome})})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-3",children:l("historicalSignificance",t)}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{children:s.significance})})]}),e.jsx(k,{participants:s.participants,lang:t}),s.relatedEvents&&s.relatedEvents.length>0&&e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:l("relatedEvents",t)}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.relatedEvents.map(n=>e.jsxs(g,{to:`${b}/${t}/event/${n.id}`,className:"border border-gray-200 dark:border-gray-700 p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:n.relationship}),e.jsx("div",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:n.title})]},n.id))})]})]})]})});export{z as default};
